(this.webpackJsonpsocial_network=this.webpackJsonpsocial_network||[]).push([[0],{11:function(e,t,n){e.exports={container:"Users_container__2BwpC",wrapper:"Users_wrapper__1M_rS",wrapper_button:"Users_wrapper_button__3V9jZ",img:"Users_img__36mqt",itemsL:"Users_itemsL__2_IKl",itemsR:"Users_itemsR__1mP9L",text:"Users_text__2ulzP",marg:"Users_marg__3SjuI",button:"Users_button__1nFpn",wraooer_button:"Users_wraooer_button__bSzwm",texT:"Users_texT__ekBGZ",itemsRL:"Users_itemsRL__LYDgc",itemsRR:"Users_itemsRR__1LgP2",status:"Users_status__2TpqI",number_pages:"Users_number_pages__1QM4j",numbers:"Users_numbers__19fat",active:"Users_active__1QTS_"}},111:function(e,t,n){e.exports={contant:"ProfileInfo_contant__2QIyq",picture:"ProfileInfo_picture__13Qxy"}},112:function(e,t,n){e.exports={status:"ProfileStatus_status__1GQPp"}},113:function(e,t,n){},122:function(e,t,n){},18:function(e,t,n){e.exports={nav:"Nav_nav__2LPqS",item:"Nav_item__2ic2h",active:"Nav_active__22-sI"}},245:function(e,t,n){"use strict";n.r(t);var s=n(1),a=n.n(s),i=n(53),r=n.n(i),c=n(12),o=n(32),u=n(33),l=n(37),j=n(36),d=(n(122),n(18)),b=n.n(d),p=n(0),f=function(){return Object(p.jsxs)("nav",{className:b.a.nav,children:[Object(p.jsx)("div",{className:b.a.item,children:Object(p.jsx)(c.b,{to:"/profile",activeClassName:b.a.active,children:"Profile"})}),Object(p.jsx)("div",{className:"".concat(b.a.item," ").concat(b.a.active),children:Object(p.jsx)(c.b,{to:"/Dialogs",activeClassName:b.a.active,children:"Messages"})}),Object(p.jsx)("div",{className:"".concat(b.a.item," ").concat(b.a.active),children:Object(p.jsx)(c.b,{to:"/users",activeClassName:b.a.active,children:"Users"})}),Object(p.jsx)("div",{className:b.a.item,children:Object(p.jsx)("a",{children:"News"})}),Object(p.jsx)("div",{className:b.a.item,children:Object(p.jsx)("a",{children:"Music"})}),Object(p.jsx)("div",{className:b.a.item,children:Object(p.jsx)("a",{children:"Settings"})})]})},O=n(9),g=n(29),h=n(3),m={messages:[{id:1,title:"hi"},{id:2,title:"How is yor it kamasutra?"},{id:3,title:"YoO"},{id:4,title:"\u0421ool dude"}],dialogs:[{id:1,name:"Petr"},{id:2,name:"Sasha"},{id:3,name:"Oleg"},{id:4,name:"Victor"}]},x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SEND-MESSAGE":var n=t.newMessageBody;return Object(h.a)(Object(h.a)({},e),{},{messages:[].concat(Object(g.a)(e.messages),[{id:(new Date).getTime(),title:n}]),dialogs:Object(g.a)(e.dialogs)});default:return e}},_=n(26),v=n.n(_);var S=function(e){return Object(p.jsx)("div",{className:v.a.dialog+" "+v.a.active,children:Object(p.jsx)(c.b,{to:"/dealogs/"+e.id,children:e.name})})},w=n(247),P=n(246);function N(e){return Object(p.jsx)("div",{className:v.a.message,children:e.title})}var U=Object(P.a)({form:"dialogAddMessageForm"})((function(e){return Object(p.jsxs)("form",{onSubmit:e.handleSubmit,children:[Object(p.jsx)(w.a,{component:"textarea",placeholder:"Enter something",name:"newMessageBody",children:" "}),Object(p.jsx)("button",{children:"Send"})]})})),T=n(8),I=n(116),E=function(e){return{isAuth:e.auth.isAuth}};function y(e){return Object(T.b)(E)((function(t){var n=t.isAuth,s=Object(I.a)(t,["isAuth"]);return n?Object(p.jsx)(e,Object(h.a)({},s)):Object(p.jsx)(O.a,{to:"/login"})}))}var C=y((function(e){var t=e.dialogs.map((function(e){return Object(p.jsx)(S,{name:e.name,id:e.id},e.id)})),n=e.messages.map((function(e){return Object(p.jsx)(N,{title:e.title},e.id)}));return!1===e.isAuth?Object(p.jsx)(O.a,{to:"/login"}):Object(p.jsxs)("div",{className:v.a.dialogs,children:[Object(p.jsx)("div",{className:v.a.dialogs__items,children:t}),Object(p.jsxs)("div",{className:v.a.messages,children:[Object(p.jsx)("div",{children:n}),Object(p.jsx)(U,{onSubmit:function(t){e.SendMessage(t.newMessageBody)}})]})]})})),A=Object(T.b)((function(e){return{dialogs:e.dialogsPage.dialogs,messages:e.dialogsPage.messages}}),(function(e){return{SendMessage:function(t){e(function(e){return{type:"SEND-MESSAGE",newMessageBody:e}}(t))}}}))(C),L=n(110),k=n.n(L).a.create({withCredentials:!0,baseURL:"https://social-network.samuraijs.com/api/1.0/",headers:{"API-KEY":"4f7a90cd-f073-4cab-b304-b853b0aa67c3"}}),R=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return k.get("users?page=".concat(e,"&count=").concat(t)).then((function(e){return e.data}))},D=function(e){return k.post("follow/".concat(e))},F=function(e){return k.delete("follow/".concat(e))},M=function(e){return console.warn("worning"),G.getProfile(e)},G={getProfile:function(e){return k.get("profile/"+e)},getStatus:function(e){return k.get("profile/status/"+e)},updateStatus:function(e){return k.put("profile/status",{status:e})}},z=function(){return k.get("auth/me")},B=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return k.post("auth/login",{email:e,password:t,rememberMe:n})},H=function(){return k.delete("auth/login")},Q={users:[],pageSize:100,totalUsersCount:0,currentPage:200,isFetching:!1,followingInProgress:[]},W=function(e){return{type:"FOLLOW",userId:e}},q=function(e){return{type:"UNFOLLOW",userId:e}},Z=function(e){return{type:"SET-USERS",users:e}},J=function(e){return{type:"SET-CURRENT-PAGE",currentPage:e}},Y=function(e){return{type:"SET-USERS-TOTAL-COUNT",totalCount:e}},K=function(e){return{type:"TOGGLE-IS-FETCHING",isFetching:e}},V=function(e,t){return{type:"TOGGLE-IS-FOLLOWING-PROGRASS",isFetching:e,userId:t}},X=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FOLLOW":return Object(h.a)(Object(h.a)({},e),{},{users:e.users.map((function(e){return e.id===t.userId?Object(h.a)(Object(h.a)({},e),{},{followed:!0}):e}))});case"UNFOLLOW":return Object(h.a)(Object(h.a)({},e),{},{users:e.users.map((function(e){return e.id===t.userId?Object(h.a)(Object(h.a)({},e),{},{followed:!1}):e}))});case"SET-USERS":return Object(h.a)(Object(h.a)({},e),{},{users:t.users});case"SET-CURRENT-PAGE":return Object(h.a)(Object(h.a)({},e),{},{currentPage:t.currentPage});case"SET-USERS-TOTAL-COUNT":return Object(h.a)(Object(h.a)({},e),{},{totalUsersCount:t.totalCount});case"TOGGLE-IS-FETCHING":return Object(h.a)(Object(h.a)({},e),{},{isFetching:t.isFetching});case"TOGGLE-IS-FOLLOWING-PROGRASS":return Object(h.a)(Object(h.a)({},e),{},{followingInProgress:t.isFetching?[].concat(Object(g.a)(e.followingInProgress),[t.userId]):e.followingInProgress.filter((function(e){return!t.userId}))});default:return e}},$=n(11),ee=n.n($),te=n.p+"static/media/c3224969bcc3648eb22ca478989fcfbb--mr-robot-robots.f654bcd6.jpg",ne=function(e){for(var t=Math.ceil(e.totalUsersCount/e.pageSize),n=[],s=1;s<=t+1;s++)n.push(s);return Object(p.jsxs)("div",{className:ee.a.wrapper,children:[Object(p.jsx)("ul",{className:ee.a.number_pages,children:n.map((function(t,n){return Object(p.jsx)("li",{className:ee.a.numbers,children:Object(p.jsx)("span",{className:e.currentPage===t?ee.a.active:"",onClick:function(n){return e.onPageChenged(t)},children:t})},n)}))}),e.users.map((function(t){return Object(p.jsxs)("div",{className:ee.a.container,children:[Object(p.jsxs)("div",{className:ee.a.itemsL,children:[Object(p.jsx)(c.b,{to:"/profile/"+t.id,children:Object(p.jsx)("img",{className:ee.a.img,src:null!==t.photos.small?t.photos.small:te,alt:"photo"})}),Object(p.jsx)("div",{className:ee.a.wrapper_button,children:t.followed?Object(p.jsx)("button",{disabled:e.followingInProgress.some((function(e){return e===t.id})),onClick:function(){return e.unfollow(t.id)},className:ee.a.button,children:"Unfollow"}):Object(p.jsx)("button",{disabled:e.followingInProgress.some((function(e){return e===t.id})),onClick:function(){return e.follow(t.id)},className:ee.a.button,children:"Follow"})})]}),Object(p.jsxs)("div",{className:ee.a.itemsR,children:[Object(p.jsxs)("div",{className:ee.a.itemsRL,children:[Object(p.jsx)("div",{className:ee.a.text,children:t.name}),Object(p.jsx)("div",{className:ee.a.status,children:t.status})]}),Object(p.jsxs)("div",{className:ee.a.itemsRR,children:[Object(p.jsx)("div",{className:ee.a.text,children:"u.location.country"}),Object(p.jsx)("div",{className:ee.a.texT,children:"u.location.city"})]})]})]},t.id)}))]})},se=n.p+"static/media/load.77dd8198.gif",ae=function(){return Object(p.jsx)("div",{children:Object(p.jsx)("img",{src:se,alt:"loading"})})},ie=n(117),re=function(e){return e.usersPage.pageSize},ce=function(e){return e.usersPage.totalUsersCount},oe=function(e){return e.usersPage.currentPage},ue=function(e){return e.usersPage.isFetching},le=function(e){return e.usersPage.followingInProgress},je=Object(ie.a)((function(e){return e.usersPage.users}),(function(e){return e})),de=function(e){Object(l.a)(n,e);var t=Object(j.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.props.getUsers(this.props.currentPage,this.props.pageSize)}},{key:"render",value:function(){var e=this;return Object(p.jsxs)(p.Fragment,{children:[this.props.isFetching?Object(p.jsx)(ae,{}):null,Object(p.jsx)(ne,{onPageChenged:function(t){e.props.getUsers(t,e.props.pageSize)},follow:this.props.follow,unfollow:this.props.unfollow,users:this.props.users,currentPage:this.props.currentPage,totalUsersCount:this.props.totalUsersCount,pageSize:this.props.pageSize,followingInProgress:this.props.followingInProgress})]})}}]),n}(a.a.Component);console.log("MSTP");var be=Object(T.b)((function(e){return{users:je(e),pageSize:re(e),totalUsersCount:ce(e),currentPage:oe(e),isFetching:ue(e),followingInProgress:le(e)}}),{follow:function(e){return function(t){t(V(!0,e)),D(e).then((function(n){0===n.data.resultCode&&t(W(e)),t(V(!1,e))}))}},unfollow:function(e){return function(t){t(V(!0,e)),F(e).then((function(n){0===n.data.resultCode&&t(q(e)),t(V(!1,e))}))}},setCurrentPage:J,toggleIsFollowingProgress:V,getUsers:function(e,t){return function(n){n(K(!0)),R(e,t).then((function(t){n(K(!1)),n(J(e)),n(Z(t.items)),n(Y(t.totalCount))}))}}})(de),pe=n(111),fe=n.n(pe),Oe=n(115),ge=n(112),he=n.n(ge),me=function(e){var t=Object(s.useState)({editMode:!1,status:e.status}),n=Object(Oe.a)(t,2),a=n[0],i=n[1];Object(s.useEffect)((function(){i(Object(h.a)(Object(h.a)({},a),{},{status:e.status}))}),[e.status]);return Object(p.jsx)("div",{className:he.a.status,children:a.editMode?Object(p.jsx)("input",{onChange:function(e){i(Object(h.a)(Object(h.a)({},a),{},{status:e.currentTarget.value}))},autoFocus:!0,onBlur:function(){i(Object(h.a)(Object(h.a)({},a),{},{editMode:!1})),e.updateStatus(a.status)},value:a.status}):Object(p.jsx)("div",{children:Object(p.jsxs)("span",{onDoubleClick:function(){i(Object(h.a)(Object(h.a)({},a),{},{editMode:!0}))},children:["Status: ",a.status," "]})})})},xe=function(e){return e.profile?Object(p.jsx)("div",{children:Object(p.jsxs)("div",{className:fe.a.picture,children:[Object(p.jsx)("img",{src:e.profile.photos.large,alt:"ptcture"}),Object(p.jsx)(me,{status:e.status,updateStatus:e.updateStatus})]})}):Object(p.jsx)(ae,{})},_e={posts:[{id:1,title:"hi, how are you",like:12},{id:2,title:"it`s my first post",like:15}],profile:null,status:""},ve=function(e){return{type:"SET-STATUS",status:e}},Se=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_e,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD-POST":var n={id:(new Date).getTime(),title:t.newPostText,like:(new Date).getTime()};return Object(h.a)(Object(h.a)({},e),{},{posts:[].concat(Object(g.a)(e.posts),[n])});case"SET-STATUS":return Object(h.a)(Object(h.a)({},e),{},{status:t.status});case"SET-USER-PROFILE":return Object(h.a)(Object(h.a)({},e),{},{profile:t.profile});default:return e}},we=n(113),Pe=n.n(we),Ne=n(79),Ue=n.n(Ne),Te=function(e){return Object(p.jsxs)("div",{className:Ue.a.wrapper,children:[Object(p.jsxs)("div",{className:Ue.a.item,children:[Object(p.jsx)("img",{src:"https://ru.fishki.net/picsw/112009/18/bonus/face/face_photo_032.jpg"}),e.message]}),Object(p.jsxs)("span",{children:["like ",e.like]})]})},Ie=Object(P.a)({form:"ProfileAddNewPostForm"})((function(e){return Object(p.jsxs)("form",{onSubmit:e.handleSubmit,children:[Object(p.jsx)(w.a,{name:"newPostText",component:"textarea"}),Object(p.jsx)("button",{children:"Add post"})]})})),Ee=a.a.memo((function(e){console.log("yo");var t=e.posts.map((function(e){return Object(p.jsx)(Te,{message:e.title,like:e.like},e.id)}));return Object(p.jsxs)("div",{children:[Object(p.jsx)("div",{children:"My posts"}),Object(p.jsx)(Ie,{onSubmit:function(t){e.addPost(t.newPostText)}}),Object(p.jsx)("div",{className:Pe.a.posts,children:t})]})})),ye=Object(T.b)((function(e){return{posts:e.profilePage.posts}}),(function(e){return{addPost:function(t){e(function(e){return{type:"ADD-POST",newPostText:e}}(t))}}}))(Ee),Ce=function(e){return Object(p.jsxs)("div",{children:[Object(p.jsx)(xe,{profile:e.profile,status:e.status,updateStatus:e.updateStatus}),Object(p.jsx)(ye,{})]})};var Ae=y((function(e){var t=e.match.params.userId;return t||e.history.push("/users"),e.getUserProfile(t),e.getUserStatus(t),Object(p.jsx)(Ce,Object(h.a)(Object(h.a)({},e),{},{profile:e.profile,status:e.status,updateStatus:e.updateUserStatus}))})),Le=Object(O.f)(Ae),ke=Object(T.b)((function(e){return{profile:e.profilePage.profile,status:e.profilePage.status}}),{getUserProfile:function(e){return function(t){M(e).then((function(e){t({type:"SET-USER-PROFILE",profile:e.data})}))}},getUserStatus:function(e){return function(t){G.getStatus(e).then((function(e){t(ve(e.data))}))}},updateUserStatus:function(e){return function(t){G.updateStatus(e).then((function(n){0===n.data.resultCode&&t(ve(e))}))}}})(Le),Re=n(57),De=n.n(Re),Fe=function(e){return Object(p.jsxs)("header",{className:De.a.header,children:[Object(p.jsx)("img",{src:"https://www.markakimlik.com/wp-content/uploads/2020/09/Markalasma-Surecinde-Logo-ve-Renk-Duzeni.jpg"}),Object(p.jsx)("div",{className:De.a.loginBlock,children:e.isAuth?Object(p.jsxs)("div",{children:[e.login," - ",Object(p.jsx)("button",{onClick:e.logOut,children:"logOut"})]}):Object(p.jsx)(c.b,{className:De.a.login,to:"/login",children:"login"})})]})},Me={userId:1,email:"ailru",login:"free",isAuth:!1},Ge=function(e,t,n,s){return{type:"SET-AUTH-USER-DATA",payload:{userId:e,email:t,login:n,isAuth:s}}},ze=function(){return function(e){return z().then((function(t){if(0===t.data.resultCode){var n=t.data.data,s=n.id,a=n.email,i=n.login;e(Ge(s,a,i,!0))}}))}},Be=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Me,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET-AUTH-USER-DATA":return Object(h.a)(Object(h.a)({},e),t.payload);default:return e}},He=function(e){Object(l.a)(n,e);var t=Object(j.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return Object(p.jsx)("div",{children:Object(p.jsx)(Fe,Object(h.a)({},this.props))})}}]),n}(a.a.Component),Qe=Object(T.b)((function(e){return{isAuth:e.auth.isAuth,login:e.auth.login}}),{logOut:function(){return function(e){H().then((function(t){0===t.data.resultCode&&e(Ge(0,"0","0",!1))}))}}})(He),We=Object(P.a)({form:"login"})((function(e){return Object(p.jsxs)("form",{onSubmit:e.handleSubmit,children:[Object(p.jsx)("div",{children:Object(p.jsx)(w.a,{name:"email",placeholder:"email",component:"input"})}),Object(p.jsx)("div",{children:Object(p.jsx)(w.a,{name:"password",placeholder:"password",component:"input",type:"password"})}),Object(p.jsxs)("div",{children:[Object(p.jsx)(w.a,{type:"checkbox",name:"rememberMe",component:"input"}),"remember me"]}),Object(p.jsx)("div",{children:Object(p.jsx)("button",{children:"Login"})})]})})),qe=Object(T.b)((function(e){return{isAuth:e.auth.isAuth}}),{logIn:function(e,t,n){return function(s){B(e,t,n).then((function(e){0===e.data.resultCode&&s(ze())}))}}})((function(e){return e.isAuth?Object(p.jsx)(O.a,{to:"/profile"}):Object(p.jsxs)("div",{children:[Object(p.jsx)("h1",{children:"Login"}),Object(p.jsx)(We,{onSubmit:function(t){e.logIn(t.email,t.password,t.rememberMe)}})]})})),Ze={initializesd:!1},Je=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ze,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INITIALIZED-SUCCESS":return Object(h.a)(Object(h.a)({},e),{},{initializesd:!0});default:return e}},Ye=function(e){Object(l.a)(n,e);var t=Object(j.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.props.initializeApp()}},{key:"render",value:function(){return this.props.initialized?Object(p.jsxs)("div",{className:"app-wrapper",children:[Object(p.jsx)(Qe,{}),Object(p.jsxs)("div",{className:"app-container",children:[Object(p.jsx)(f,{}),Object(p.jsxs)("div",{className:"app-wrapper-contant",children:[Object(p.jsx)(O.b,{path:"/dialogs",render:function(){return Object(p.jsx)(A,{})}}),Object(p.jsx)(O.b,{path:"/profile/:userId",render:function(){return Object(p.jsx)(ke,{})}}),Object(p.jsx)(O.b,{path:"/users",render:function(){return Object(p.jsx)(be,{})}}),Object(p.jsx)(O.b,{path:"/login",render:function(){return Object(p.jsx)(qe,{})}})]})]})]}):Object(p.jsx)(ae,{})}}]),n}(s.Component),Ke=Object(T.b)((function(e){return{initialized:e.app.initializesd}}),{initializeApp:function(){return function(e){var t=e(ze());Promise.all([t]).then((function(){e({type:"INITIALIZED-SUCCESS"})}))}}})(Ye),Ve=n(10),Xe={},$e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xe;return e},et=n(114),tt=n(248),nt=Object(Ve.c)({profilePage:Se,dialogsPage:x,sideBar:$e,usersPage:X,auth:Be,form:tt.a,app:Je}),st=Object(Ve.d)(nt,Object(Ve.a)(et.a));window.store=st;var at=st;r.a.render(Object(p.jsx)(c.a,{children:Object(p.jsxs)(T.a,{store:at,children:[Object(p.jsx)(Ke,{}),","]})}),document.getElementById("root"))},26:function(e,t,n){e.exports={dialogs:"Dialogs_dialogs__1J_X1",dialogs__items:"Dialogs_dialogs__items__2La5L",active:"Dialogs_active__1w4Qp",dialog:"Dialogs_dialog__2BkpL",messages:"Dialogs_messages__3Q49x",message:"Dialogs_message__2U4jD"}},57:function(e,t,n){e.exports={header:"Header_header__fHWjq",login:"Header_login__3bGGL",loginBlock:"Header_loginBlock__3aQOw"}},79:function(e,t,n){e.exports={item:"Post_item__1xhAm",wrapper:"Post_wrapper__lwSv7"}}},[[245,1,2]]]);
//# sourceMappingURL=main.5e72e178.chunk.js.map